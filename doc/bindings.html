<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Jsonnet - The Data Templating Language</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
    <meta name="keywords" content="Jsonnet, JSON, YAML, language, configuration, configuration language, functional, declarative, lazy, structured, elegant, semantics, clean, mixins, inheritance, template, expansion, expand" />
    <meta name="description" content="The Jsonnet language allows elegant and easy description of JSON data." />

    <link rel="icon" type="image/png" href="favicon.png" />

    <link rel="stylesheet" href="prism.css" />
    <link rel="stylesheet" type="text/css" href="doc.css" />

    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-53570216-1', 'auto');
      ga('send', 'pageview');

    </script>

    <script src="prism.js" type="text/javascript">
    </script>

    <script type="text/javascript">
    Prism.languages.jsonnet = {
      'cppcomment': /\/\/.*/g,
      'comment': /\/\*[\w\W]*?\*\//g,
      'string': /("|')(\\?.)*?\1/g,
      'keyword': /\b(self|super)\b|\$/g,
      'boolean': /\b(true|false)\b/g,
      'constant': /\bnull\b/g,
      'error': /\berror\b/g,
      'special': /\b(local|function|if|then|else|import|importstr|for|in)\b/g,
      'number': /\b[0-9][0-9.eE]*\b/g,
      'operator': /(\+|\*|\/)+/g,
    };
    </script>

    <style type="text/css">
    .token.comment,
    .token.cppcomment {
      color: #040;
    }

    .token.identifier {
      color: #000;
    }
    .token.operator {
      color: #000;
    }

    .token.boolean,
    .token.number,
    .token.constant {
      color: #05a;
    }

    .token.string {
      color: #000048;
    }

    .token.keyword,
    .token.special {
      color: blue;
    }

    .token.error {
      color: red;
    }
    </style>


    <script type="text/javascript">

        var menu_timeout = null;

        function set_visible(menu, b)
        {
            var category = menu.children[0];
            var dropdown = menu.children[1];
            category.style['border-radius'] = b && dropdown != null ? '4px 4px 0px 0px' : '4px';
            if (dropdown != null) {
                dropdown.style.visibility = b ? 'visible' : 'hidden';
            }
        }

        function menu_open(el)
        {
            menu_close_all();
            var menu = el;
            while (menu.id === "") {
                menu = menu.parentNode;
            }
            set_visible(menu, true);
        }

        function menu_leave()
        {
            if (menu_timeout != null) {
                window.clearTimeout(menu_timeout);
            }
            menu_timeout = window.setTimeout(menu_close_all, 300);
        }

        function menu_close_all()
        {
            var mb = document.getElementById("menubar");
            if (mb == null) return;
            var menus = mb.children;
            for (var i = 0 ; i < menus.length ; ++i) {
                set_visible(menus[i], false);
            }
            if (menu_timeout != null) {
                window.clearTimeout(menu_timeout);
                window_timeout = null;
            }
        }

        document.onclick = menu_close_all(); 

    </script>

</head>

<body class="language-jsonnet">

<div class="header">

<div class="tagline"><i>The data templating language</i></div>
<div id="githubmarkbox">
<a href="https://groups.google.com/forum/#!forum/jsonnet"><div id="groupsmark"></div></a>
<a href="http://github.com/google/jsonnet"><div id="githubmark"></div></a>
</div>
<div class="title"><a href="index.html" class="title">Jsonnet</a></div>

<ol id="menubar">

    <li id="menu_userdocs">
        <a href="userdocs.html" onmouseover="menu_open(this)" onmouseout="menu_leave()">User docs</a>
        <div onmouseover="menu_open(this)" onmouseout="menu_leave()">
            <a href="tutorial.html">Tutorial</a>
            <a href="demo.html">Demo</a>
            <a href="stdlib.html">Standard Library</a>
        </div>
    </li>

    <li id="menu_casestudies">
        <a href="casestudies.html" onmouseover="menu_open(this)" onmouseout="menu_leave()">Case Studies</a>
        <div onmouseover="menu_open(this)" onmouseout="menu_leave()">
            <a href="casestudy_fractal.1.html">Fractal</a>
        </div>
    </li>

    <li id="menu_language">
        <a href="language.html" onmouseover="menu_open(this)" onmouseout="menu_leave()">Language</a>
        <div onmouseover="menu_open(this)" onmouseout="menu_leave()">
            <a href="design.html">Design</a>
            <a href="comparisons.html">Comparisons</a>
            <a href="spec.html">Specification</a>
        </div>
    </li>

    <li id="menu_implementation">
        <a href="implementation.html" onmouseover="menu_open(this)" onmouseout="menu_leave()">Implementation</a>
        <div onmouseover="menu_open(this)" onmouseout="menu_leave()">
            <a href="commandline.html">Cmdline Tool</a>
            <a href="bindings.html">Libraries</a>
            <a href="cpp.html">C++ Internals</a>
            <a href="javascript.html">Javascript</a>
            <a href="tests.html">Tests</a>
        </div>
    </li>

    <li id="menu_contributing">
        <a href="contributing.html" onmouseover="menu_open(this)" onmouseout="menu_leave()">Contributing</a>
    </li>

</ol>

<div style="clear: both"></div>

</div>

<h1>Libraries For Other Languages</h1>

<p> If you don't want to invoke the jsonnet commandline utility to evaluate Jsonnet, there are also
libraries for Python and C.  In future we would like to support more languages by wrapping the C
API in each case.</p>

<h2>C API</h2>

<p>The C API simply wraps the C++ implementation to hide C++ language features like templates,
classes, overloading, etc.  This makes it easier to bind to other languages, as C is typically the
lowest common denominator across all systems.</p>

<p>The API is documented in <a
href="http://github.com/google/jsonnet/blob/master/libjsonnet.h">libjsonnet.h</a>.  It is built with
'make libjsonnet.so'.  It is used by the python bindings, the Jsonnet commandline tool, as well as a
couple of simpler tests.  Search for #include "libjsonnet.h".  </p>

<p>To use the API, create a JsonnetVM object, set various options, then tell it to evaluate a
filename or snippet.  To avoid leaking memory, the result of execution (JSON or error message) and
the JsonnetVM object itself must be cleaned up using the corresponding functions.</p>

<h2>Python API</h2>

<p>The Python API wraps the C API in a straightforward way.  It can be installed with <tt>pip
install jsonnet</tt> or built directly with <tt>setup.py</tt>.</p>

<p>The Python module provides two functions, <tt>evaluate_file(f)</tt> and <tt>evaluate_snippet(f,
e)</tt>.  In the latter case, the parameter <tt>f</tt> is used in stack traces due to errors raised
in the snippet.</p>

<p>Keyword arguments to these functions are used to control the virtual machine.  They are
<tt>gc_min_objects</tt>, <tt>gc_growth_trigger</tt>, <tt>ext_vars</tt>, <tt>debug_ast</tt>, and
<tt>max_trace</tt>.  The <tt>debug_ast</tt> argument is a boolean, and <tt>ext_vars</tt> is a dict
mapping strings to strings.  The other keyword arguments should be numbers.</p>

<p>If an error is raised during the evaluation of the Jsonnet code, it is formed into a stack trace
and thrown as a python RuntimeError.  Otherwise, the JSON string is returned.  To convert this
into objects for easy interpretation in Python, use the <a
href="https://docs.python.org/2/library/json.html">json</a> module.  An example:</p>

<pre>
import json
import _jsonnet

jsonnet_str = '''
{
    person1: {
        name: "Alice",
        welcome: "Hello " + self.name + "!",
    },
    person2: self.person1 { name: std.extVar("OTHER_NAME") },
}
'''

json_str = _jsonnet.evaluate_snippet("snippet", jsonnet_str, ext_vars={'OTHER_NAME': 'Bob'})
json_obj = json.loads(json_str)
for person_id, person in json_obj.iteritems():
    print('%s is %s, greeted by "%s"' % (person_id, person['name'], person['welcome']))
</pre>


<h2>Unofficial Third Party APIs</h2>

<p>There are unofficial bindings available for other languages.  These are not supported by Google
and may be some versions behind the latest release.</p>

<ul>
<li><b>Go</b>: <a href="https://github.com/strickyak/jsonnet_cgo">https://github.com/strickyak/jsonnet_cgo</a></li>
<li><b>LuaJIT (FFI)</b>: <a href="https://github.com/yuduanchen/luajit-jsonnet">https://github.com/yuduanchen/luajit-jsonnet</a></li>
<li><b>Node.js</b>: <a href="https://github.com/yosuke-furukawa/node-jsonnet">https://github.com/yosuke-furukawa/node-jsonnet</a></li>
<li><b>PHP</b>: <a href="https://github.com/Neeke/Jsonnet-PHP">https://github.com/Neeke/Jsonnet-PHP</a></li>
<li><b>Python3 &amp; Visual Studio build files</b>: <a href="https://github.com/tyler-elric/jsonnet">https://github.com/tyler-elric/jsonnet</a></li>
</ul>

<div style="margin-bottom: 50px"></div>
<hr />
<p class="copyright">
Except as noted, this content is licensed under Creative Commons Attribution 2.5.
</p>
</body>

</html>